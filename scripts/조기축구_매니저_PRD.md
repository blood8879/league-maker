# 아마추어 축구 동호회 관리 플랫폼 PRD

## 1. 제품 개요

### 1.1 제품명
**조기축구 매니저** (가칭)

### 1.2 제품 목적
아마추어 축구 동호회(조기축구)의 팀 관리, 경기 일정 관리, 참석률 및 스탯 기록을 효율적으로 관리할 수 있는 통합 플랫폼

### 1.3 핵심 가치
- 팀 운영의 투명성과 효율성 증대
- 개인 스탯 및 참석률의 체계적 관리
- 현실적인 아마추어 축구 환경 반영 (외부팀, 용병 시스템 등)

## 2. 타겟 사용자

### 2.1 주요 사용자
- **팀장/관리자**: 팀 운영, 경기 일정 관리, 멤버 관리
- **일반 회원**: 경기 참석 관리, 개인 스탯 확인, 팀 검색/가입
- **용병**: 임시 참여자 (비회원)

### 2.2 사용 환경
- 주로 모바일 환경에서 사용
- 경기 전후 실시간 정보 업데이트 필요

## 3. 기술 스택 및 제약사항

### 3.1 기술 스택
- **백엔드**: Supabase (Database + Auth + Real-time)
- **인증**: 소셜 로그인 (구글/카카오 OAuth) - 이메일 로그인 제외
- **프론트엔드**: Next.js + tailwindcss + framer-motion + zustand

### 3.2 제약사항
- 별도 백엔드 서버 구축하지 않음
- Supabase 기능 범위 내에서 개발

## 4. MVP 기능 요구사항

### 4.1 사용자 관리

#### 4.1.1 인증 시스템
- 소셜 로그인 (구글/카카오 OAuth)
- Supabase Auth 연동
- 로그아웃 기능

#### 4.1.2 프로필 관리
- 기본 프로필 생성 (이름, 닉네임, 연락처)
- 포지션 선택 (GK, DF, MF, FW)
- 프로필 수정
- 계정 탈퇴

### 4.2 팀 관리

#### 4.2.1 팀 생성
- 팀 기본정보 입력 (팀명, 소개, 지역, 활동요일, 활동시간)
- **구단주 자동 설정** (생성자)
- 팀 고유 코드 생성

#### 4.2.2 팀 검색 및 가입
- 지역별 팀 목록 조회
- 팀 상세 정보 보기 (멤버 수, 활동 정보)
- 가입 신청 기능
- 가입 신청 취소

#### 4.2.3 멤버 관리 및 역할 체계
- **역할 체계**
  - **구단주 (팀장)**: 팀 생성자, 최고 권한 (1명)
  - **운영진**: 팀 운영 권한 보유 (다수 가능)
  - **주장**: 경기 운영 권한 보유 (1명)
  - **일반 멤버**: 기본 멤버

- **멤버 관리 권한**
  - 가입 신청 목록 조회 (구단주, 운영진)
  - 멤버 승인/거절 (구단주, 운영진)
  - 팀원 목록 조회 (전체)
  - 멤버 강퇴 (구단주만)
  - **역할 지정/해제**
    - 운영진 임명/해제 (구단주만)
    - 주장 임명/해제 (구단주, 운영진)
  - 구단주 권한 위임 (구단주만)

#### 4.2.4 홈구장 관리
- **홈구장 등록** (구단주, 운영진)
  - 구장명, 주소, 위도/경도 좌표 입력
  - 구장 설명 및 특이사항 메모
  - 연락처 및 예약 관련 정보
- **홈구장 정보 수정/삭제** (구단주, 운영진)
- **홈구장 필수 등록**: 경기 일정 생성을 위한 선행 조건
- **구장 즐겨찾기**: 자주 사용하는 외부 구장 등록

### 4.3 외부팀 관리

#### 4.3.1 외부팀 등록 및 관리
- **외부팀 등록** (구단주, 운영진)
  - 팀명, 지역, 연락처, 메모 입력
  - 팀별로 독립적인 외부팀 목록 관리
- **외부팀 목록 조회** - 우리 팀이 등록한 외부팀들
- **외부팀 정보 수정/삭제** (구단주, 운영진)
- **자주 만나는 팀 즐겨찾기** - 단골팀 표시

#### 4.3.2 외부팀과의 전적 관리
- **외부팀별 전적 통계**
  - 승/무/패 기록
  - 총 경기 수
  - 최근 경기 일정
  - **득실점 기록** (우리팀 득점/실점)
  - **주요 선수 스탯** (외부팀 상대 골/어시스트 top 3)
- **외부팀과의 경기 히스토리** - 과거 모든 경기 기록 조회
- **외부팀별 상세 분석**
  - 시즌별 전적 변화
  - 홈/어웨이 전적 구분
  - 평균 득점/실점

### 4.4 경기 일정 관리

#### 4.4.1 경기 생성
- **홈구장 선택 필수**: 등록된 홈구장 또는 즐겨찾기 구장에서만 경기 생성 가능
- **경기 유형 선택**
  - **등록팀과의 경기**: 시스템 내 팀 검색 및 선택
  - **외부팀과의 경기**: 등록된 외부팀 선택 또는 새 외부팀 등록
- 경기 기본 정보 (날짜, 시간, 구장 선택)
- **날씨 정보 표시** (추후 구현 예정)
  - 경기 당일 해당 구장 위치의 날씨 예보
  - 기온, 강수확률, 풍속 등 경기 관련 정보
- **경기 생성 권한**: 구단주, 운영진, 주장
- **경기 정보 수정/삭제**: 경기 생성자 또는 구단주, 운영진

#### 4.4.2 참석 관리
- **참석자 유형별 관리**
  - 정규 멤버: 참석/불참 선택
  - 용병: 구단주, 운영진, 주장이 직접 추가 (이름, 연락처)
- 참석 여부 변경
- 참석 마감 시간 설정 (구단주, 운영진, 주장)
- **멀티팀 가입자 충돌 감지**
  - 같은 시간대 다른 팀 경기 경고
  - 팀별 개별 참석 선택

#### 4.4.3 참석 현황
- 정규 멤버 참석 현황 (확정/미정/불참)
- 용병 참석 현황 (확정/대기/취소)
- 총 참석 예상 인원 (정규멤버 + 용병)
- 실시간 참석자 명단

#### 4.4.4 경기 목록 및 구분
- 경기 목록에서 경기 유형 표시
  - `vs 등록팀명` (파란색 배지) - 시스템 내 팀
  - `vs 외부팀명` (주황색 배지) - 등록된 외부팀
- 필터링 기능
  - 등록팀 경기만
  - 외부팀 경기만

### 4.5 경기 스탯 관리

#### 4.5.1 경기별 스탯 입력
- **등록팀 경기**: 양쪽 팀 스탯 입력 가능
- **외부팀 경기**: 우리 팀 스탯만 입력
- 개인별 골 수 입력 (구단주, 운영진)
- 개인별 어시스트 수 입력 (구단주, 운영진)
- **용병 스탯 포함**: 용병의 골/어시스트도 기록
- 스탯 수정/삭제 (구단주, 운영진)
- 경기 결과 기록 (승/무/패)

#### 4.5.2 개인 스탯 조회
- **팀별 개별 스탯**: 각 소속팀에서의 기록 따로 관리
- 개인별 누적 참석률 (참석한 경기 / 전체 경기)
- 개인별 누적 골 수
- 개인별 누적 어시스트 수
- 경기별 상세 기록 조회

#### 4.5.3 팀 스탯 현황
- 팀원별 스탯 순위 (골, 어시스트, 참석률)
- 팀 전체 통계 (총 경기 수, 평균 참석률)
- **외부팀과의 스탯**: 외부팀 상대로 한 우리팀 선수들의 골/어시스트

### 4.6 기본 소통

#### 4.6.1 공지사항
- 공지사항 작성 (구단주, 운영진)
- 공지사항 목록 조회
- 공지사항 수정/삭제 (구단주, 운영진, 작성자)

#### 4.6.2 알림 시스템
- 새 경기 일정 알림
- 가입 승인/거절 알림
- 새 공지사항 알림
- 알림 읽음 처리

### 4.7 멀티팀 관리

#### 4.7.1 소속팀 관리
- 소속팀 목록 조회
- 팀별 대시보드 전환
- 경기 일정 통합 뷰 (모든 팀 경기 일정)
- 참석 충돌 캘린더 (겹치는 경기 일정 시각적 표시)
- 우선순위 팀 설정 (메인팀 지정)

### 4.8 용병 관리

#### 4.8.1 용병 기록 관리
- **자동 용병 등록 시스템**
  - 경기 참여시 용병 정보 자동 저장 (이름, 연락처, 포지션)
  - 중복 용병 자동 감지 및 통합 (이름+연락처 기준)
  - 용병별 고유 ID 생성
- **용병 풀 관리** (구단주, 운영진, 주장)
  - 자주 함께하는 용병들 연락처 저장
  - 용병별 포지션 및 메모 관리
  - **용병 등급 설정** (S급/A급/B급 등)
  - **용병 평가 및 코멘트**

#### 4.8.2 용병 통계 및 기록
- **용병별 개인 통계**
  - 우리팀과의 총 경기 수
  - 용병별 누적 골/어시스트
  - 경기별 참석 기록
  - 평균 평점 (경기 후 평가)
- **용병 히스토리**
  - 용병과 함께한 모든 경기 기록
  - 용병별 승률 통계
  - 포지션별 활용도
- **용병 검색 및 필터링**
  - 포지션별 용병 검색
  - 평점/등급별 필터링
  - 최근 활동일 기준 정렬

#### 4.8.3 용병 모집 및 관리
- 용병 모집 기능 (경기별 필요 용병 수 설정)
- **기존 용병 초대**: 과거 기록이 있는 용병 목록에서 선택
- **신규 용병 추가**: 새로운 용병 정보 입력 (자동으로 기록에 추가)
- 용병 참석 확인 관리
- **용병 평가 시스템**: 경기 후 용병 성과 평가 입력

## 5. 데이터베이스 설계 (Supabase)

### 5.1 핵심 테이블
```sql
-- 사용자 정보
users: 
  id, email, name, nickname, phone, position, created_at

-- 팀 정보  
teams: 
  id, name, description, region, activity_day, activity_time, 
  captain_id, team_code, created_at

-- 홈구장 정보
home_stadiums:
  id, team_id, name, address, latitude, longitude, 
  description, contact, booking_info, created_at

-- 즐겨찾기 구장 (자주 사용하는 외부 구장)
favorite_stadiums:
  id, team_id, name, address, latitude, longitude,
  description, contact, booking_info, created_at

-- 팀 멤버 관계
team_members: 
  id, team_id, user_id, role('owner'|'manager'|'captain'|'member'), 
  is_primary_team, join_order, status, joined_at

-- 가입 신청
team_join_requests: 
  id, team_id, user_id, status, requested_at

-- 외부팀 정보
external_teams: 
  id, team_id(등록한 팀), name, region, contact, notes, 
  is_favorite, created_at

-- 경기 일정
matches: 
  id, team_id, match_type('internal'|'external'), 
  opponent_team_id, -- 등록팀인 경우
  external_team_id, -- 외부팀인 경우
  stadium_id, -- 홈구장 또는 즐겨찾기 구장 ID  
  match_date, match_time,
  match_result('win'|'draw'|'lose'|null), created_at

-- 참석 여부
match_attendances: 
  id, match_id, user_id, attendance_type('member'|'mercenary'), 
  attendance_status, mercenary_name, mercenary_contact

-- 경기 스탯
match_stats: 
  id, match_id, user_id, player_type('member'|'mercenary'), 
  player_name, goals, assists

-- 용병 풀
mercenary_pool: 
  id, team_id, name, contact, position, notes

-- 외부팀과의 전적
external_team_records:
  id, team_id, external_team_id, total_matches, wins, draws, loses,
  last_match_date, updated_at

-- 용병 기록 테이블 (경기 참여한 모든 용병 자동 저장)
mercenary_records:
  id, team_id, name, contact, position, total_matches, 
  total_goals, total_assists, average_rating, 
  first_played_date, last_played_date, grade, notes, created_at

-- 용병 평가 기록
mercenary_evaluations:
  id, match_id, mercenary_record_id, rating(1-10), 
  performance_notes, created_by_user_id, created_at

-- 외부팀별 상세 통계
external_team_detailed_stats:
  id, team_id, external_team_id, match_id, 
  our_team_goals, external_team_goals, 
  our_team_possession, match_notes, created_at

-- 용병별 경기 기록 (match_stats와 연동)
mercenary_match_records:
  id, match_id, mercenary_record_id, goals, assists, 
  rating, position_played, minutes_played

-- 알림
notifications: 
  id, user_id, type, title, message, is_read, created_at

-- 공지사항
announcements: 
  id, team_id, title, content, created_at
```

## 6. 우선순위 및 개발 단계

### 6.1 Phase 1 (MVP 핵심)
1. 사용자 관리 (인증, 프로필)
2. 기본 팀 관리 (생성, 검색, 가입)
3. **홈구장 등록 및 관리**
4. 기본 경기 일정 관리 (홈구장 필수 조건 포함)
5. 기본 참석 관리

### 6.2 Phase 2 (스탯 및 외부팀)
1. 경기 스탯 관리
2. 외부팀 등록 및 관리 시스템
3. **외부팀과의 상세 전적 및 통계 관리**
4. **용병 자동 기록 및 통계 시스템**
5. 즐겨찾기 구장 관리
6. 기본 소통 기능

### 6.3 Phase 3 (고급 기능)
1. 멀티팀 관리
2. **고급 용병 관리 시스템** (평가, 등급, 상세 통계)
3. 고급 알림 및 공지사항
4. **외부팀과의 상세 통계 분석** (시즌별, 홈/어웨이별)
5. 경기장별 날씨 정보 연동

## 7. V2 이후 추가 예정 기능
- 리그 생성 및 관리
- 회비 관리 시스템
- 채팅 시스템
- **용병 매칭 시스템** (지역별 용병 풀 공유)
- **외부팀 네트워크** (다른 팀들과의 정보 공유)
- 사진/영상 갤러리
- **고급 경기장 정보 관리** (구장 평점, 리뷰, 시설 정보 등)
- **경기장 예약 시스템 연동** (추후 구현)

## 8. 성공 지표
- 팀 생성 및 활성 팀 수
- **홈구장 등록 완료율**
- 월평균 경기 생성 수
- **용병 재참여율** (한번 참여한 용병의 재참여 비율)
- **외부팀과의 지속적 경기 비율**
- 사용자 참석률 입력 완료율
- 사용자 재방문율 (주간 기준)
- 외부팀 등록 및 활용률

## 9. 추가 고려사항

### 9.1 외부팀 → 등록팀 전환
- 외부팀이 나중에 시스템에 가입했을 때
- 기존 외부팀 기록을 등록팀 기록으로 자동 전환
- 양방향 경기 기록으로 업그레이드

### 9.2 데이터 무결성
- 외부팀 삭제시 관련 경기 기록 처리
- 멤버 탈퇴시 스탯 기록 유지 방안
- 팀 해체시 데이터 보존 정책